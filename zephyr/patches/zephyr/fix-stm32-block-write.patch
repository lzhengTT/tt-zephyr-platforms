diff --git a/drivers/smbus/smbus_stm32.c b/drivers/smbus/smbus_stm32.c
index 7f62f331989..54f65e7fd7c 100644
--- a/drivers/smbus/smbus_stm32.c
+++ b/drivers/smbus/smbus_stm32.c
@@ -235,13 +235,18 @@ static int smbus_stm32_block_write(const struct device *dev, uint16_t periph_add
 		{
 			.buf = &command,
 			.len = sizeof(command),
-			.flags = 0,
+			.flags = I2C_MSG_WRITE | I2C_MSG_RESTART,
+		},
+		{
+			.buf = &count,
+			.len = sizeof(count),
+			.flags = I2C_MSG_WRITE,
 		},
 		{
 			.buf = buf,
 			.len = count,
-			.flags = 0,
-		},
+			.flags = I2C_MSG_WRITE | I2C_MSG_STOP,
+		}
 	};
 
 	return i2c_transfer(config->i2c_dev, messages, ARRAY_SIZE(messages), periph_addr);
